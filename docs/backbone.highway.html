<!DOCTYPE html>

<html>
<head>
  <title>backbone.highway.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>backbone.highway.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">root, factory</span>) </span>{
<span class="hljs-pi">  'use strict'</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>AMD. Register as an anonymous module.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    define([<span class="hljs-string">'backbone'</span>, <span class="hljs-string">'underscore'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Backbone, _</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Use globals variables in case that
they are undefined locally</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> factory(root, Backbone || root.Backbone, _ || root._);
    });
  }
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Note. Does not work with strict CommonJS, but
only CommonJS-like environments that support module.exports,
like Node.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">module</span>.exports = factory(root, <span class="hljs-built_in">require</span>(<span class="hljs-string">'backbone'</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>));
  }
  <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Browser globals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    factory(root, root.Backbone, root._);
  }
}(<span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">root, Backbone, _</span>) </span>{
<span class="hljs-pi">  'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Import globals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> localStorage = root.localStorage;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Instance holder for the actual Backbone.Router</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> router = <span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Basic Backbone routes object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> routes = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Extended routes definitions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> extendedRoutes = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Basic Backbone controller object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> controller = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Extended controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> extendedController = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Collection of routes close event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> closeControllers = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Trigger cache memory</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> cachedTriggers = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Path parsing regular expressions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> re = {
    headingSlash: <span class="hljs-regexp">/^(\/|#)/</span>,
    trailingSlash: <span class="hljs-regexp">/\/$/</span>,
    parentheses: <span class="hljs-regexp">/[\(\)]/g</span>,
    optionalParams: <span class="hljs-regexp">/\((.*?)\)/g</span>,
    splatParams: <span class="hljs-regexp">/\*\w+/g</span>,
    namedParam: <span class="hljs-regexp">/(\(\?)?:\w+/</span>,
    namedParams: <span class="hljs-regexp">/(\(\?)?:\w+/g</span>
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><strong>Default options that are extended when the router is started</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> defaultOptions = {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h4 id="backbone-history-options">Backbone History options</h4>
<p>Docs: <a href="http://backbonejs.org/#History">http://backbonejs.org/#History</a></p>

            </div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Use html5 pushState</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    pushState: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Root url for pushState</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    root: <span class="hljs-string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Set to false to force page reloads for old browsers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    hashChange: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Don’t trigger the initial route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    silent: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h4 id="backbone-highway-specific-options">Backbone.Highway specific options</h4>

            </div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Event aggregator used to dispatch triggers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    dispatcher: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>The current user status, logged in or not</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    authenticated: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Enable automatic execution of a login route when accessing a secured route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    redirectToLogin: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Names of automatically executed routes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    routes: {
      login: <span class="hljs-string">'login'</span>,
      error404: <span class="hljs-string">'404'</span>,
      error403: <span class="hljs-string">'403'</span>
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Local storage</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    store: {
      prefix: <span class="hljs-string">'backbone-highway'</span>,
      separator: <span class="hljs-string">':'</span>
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Print out debug information</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    debug: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Override log method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    log: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.debug &amp;&amp; root.console &amp;&amp; root.console.log) {
        root.console.log.apply(root.console, <span class="hljs-built_in">arguments</span>);
      }
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p><strong>Map a list of routes.</strong></p>
<ul>
<li><em>@param {Function} <strong>method</strong> - A method that receives the router as context</em></li>
</ul>
<p>This method gets as the only parameter a function which will be executed in the router context,
therefore, any methods of the router can be called from ‘this’ inside that function.
Typically, only the ‘route’ method will be used.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> definer = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">method</span>) </span>{
    <span class="hljs-keyword">if</span> (!_.isFunction(method)) {
      <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway.map] Missing routes definer method as the first parameter'</span>);
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(
        <span class="hljs-string">'[Backbone.Highway.map] First and only argument should be a function, instead got '</span> +
        (<span class="hljs-keyword">typeof</span> method)
      );
    }

    <span class="hljs-keyword">return</span> method.call(<span class="hljs-keyword">this</span>);
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p><strong>Backbone.Highway commander</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> Highway = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Highway</span> (<span class="hljs-params"></span>) </span>{};</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Highway prototype</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Highway.prototype = {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Store routes that were executed last</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    currentRoutes: [],</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p><strong>Initialize the Backbone.Highway router</strong></p>
<ul>
<li><em>@param {Object} <strong>options</strong> - Object to override default router configuration</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    start: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">options</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Extend default options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.options = _.extend({}, defaultOptions, options);</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Re-extend default route names instead
of depending on a deep extend method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.options.routes = _.extend({}, defaultOptions.routes, <span class="hljs-keyword">this</span>.options.routes);</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Store the event aggregator more conveniently</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.dispatcher = <span class="hljs-keyword">this</span>.options.dispatcher;

      <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway.start] Starting router'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Extend original Backbone.Router</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> Router = Backbone.Router.extend(_.extend({}, controller, {
        routes: routes
      }));</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Initialize Backbone.Router instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      router = <span class="hljs-keyword">new</span> Router();</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Start Backbone.History</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._startHistory();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p><strong>Restart the router</strong></p>
<p>This actually stops and starts the Backbone.history module,
effectively re-executing the currently displayed route.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    restart: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      Backbone.history.stop();
      Backbone.history.start();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Apply the definer method to Highway prototype</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    map: definer,
    define: definer,
    declare: definer,</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p><strong>Declare a route and its actions to the Router.</strong></p>
<ul>
<li><em>@param  {String} <strong>name</strong> The name of the route, needs to be unique (e.g. ‘user.add’)</em></li>
<li><em>@param  {Object} <strong>def</strong>  The route definition object</em></li>
</ul>
<p>A route is composed of a unique name and an object definition of its actions.
The object can be composed in a few different ways, here is an example for a route named ‘user_edit’ :</p>
<pre><code class="lang-javascript">{
  path: <span class="hljs-string">'/user/:id/edit'</span>,
  before: [
    <span class="hljs-comment">// Triggers to be executed before the action</span>
  ],
  action: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">userId</span>) </span>{
    <span class="hljs-comment">// Custom display generation using the given userId</span>
  }
  after: [
    <span class="hljs-comment">// Triggers to be executed after the action</span>
  ]
}
</code></pre>
<p>The action can be the name of another route definition to create aliases like so :</p>
<pre><code class="lang-javascript">{
  path: <span class="hljs-string">'/'</span>,
  action: <span class="hljs-string">'user_login'</span>
}
</code></pre>
<p>A route can be limited to when a user is connected by setting the route.authenticated option to true.
For this to work the Backbone.Highway ‘authenticated’ option has to be true aswell
when the server considers the user logged in.</p>
<pre><code class="lang-javascript">{
  path: <span class="hljs-string">'/admin'</span>,
  authenticated: <span class="hljs-literal">true</span>,
  action: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Render admin template</span>
  }
}
</code></pre>
<p>A trigger can be declared in different ways.
It can be a string which will be passed to the router dispatcher.
Else, it can be an object so that static arguments can be passed to the trigger.</p>
<p>Trigger object parameters :</p>
<ul>
<li>name (String): The trigger name</li>
<li>path (String): Trigger name can be replaced by a route path</li>
<li>args (Array, Optional): Arguments that will be mapped onto the trigger event listener, default: []</li>
<li>cache (Boolean, Optional): Will only permit the execution of the trigger once</li>
</ul>
<p>For example :</p>
<pre><code class="lang-javascript">{
  name: <span class="hljs-string">'core:display'</span>,
  args: [
    <span class="hljs-comment">// List of arguments applied onto the called trigger event listener</span>
  ],
  cache: <span class="hljs-literal">true</span>
}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    route: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name, def</span>) </span>{
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">var</span> routesExtension = {};
      <span class="hljs-keyword">var</span> controllerExtension = {};
      <span class="hljs-keyword">var</span> currentName = name;

      <span class="hljs-keyword">if</span> (!_.isString(name)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ReferenceError</span>(<span class="hljs-string">'[Backbone.Highway.route] Route name should be a string'</span>);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Throw an exception, if def is an empty object nothing will work</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!_.isObject(def)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ReferenceError</span>(<span class="hljs-string">'[Backbone.Highway.route] Route definition needs to be an object'</span>);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Remove the first slash in the path for the Backbone router</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (def.path) {
        def.path = <span class="hljs-keyword">this</span>._stripHeadingSlash(def.path);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Check if a controller has already registered this path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (def.path &amp;&amp; routes[def.path]) {</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>If so, retrieve it’s name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        name = routes[def.path];
      }
      <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Create a placeholder for multiple route names</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        extendedRoutes[def.path] = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Create a placeholder for the route controllers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        extendedController[name] = {
          re: _.isString(def.path) ? <span class="hljs-keyword">this</span>._routeToRegExp(def.path) : <span class="hljs-literal">null</span>,
          wrappers: []
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Register the route path and controller name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        routesExtension[def.path] = name;</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Create a wrapping controller method to permit for multiple route/controller bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        controllerExtension[name] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
          self._processControllers({name: name, args: <span class="hljs-built_in">arguments</span>});
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Apply the new routes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _.extend(routes, routesExtension);</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Apply the new controllers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _.extend(controller, controllerExtension);

        <span class="hljs-keyword">if</span> (router !== <span class="hljs-literal">null</span> &amp;&amp; def.path) {</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Add route dynamically since the router has already been started</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          router.route(def.path, name, controllerExtension[name]);
        }
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Store the close controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (def.close) {
        closeControllers[currentName] = def.close;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Declare a controller wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> controllerWrapper = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">args, trigger</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>Store the current route name if it is not a trigger</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!trigger) {
          self.currentRoutes.push(currentName);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Check if the route should be ignored based on the user being logged in or not
and the route.authenticated option being set to true or false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!_.isUndefined(def.authenticated) &amp;&amp;
          ((def.authenticated &amp;&amp; !self.options.authenticated) || (!def.authenticated &amp;&amp; self.options.authenticated))
        ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Redirect user to login route if defined, else try to execute 403 controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> (self.options.redirectToLogin &amp;&amp; !self.options.authenticated) {
            self.options.log(<span class="hljs-string">'[Backbone.Highway] Secured page, redirecting to login'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Store current route in case login reloads the page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            self._storeCurrentRoute();</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Redirect to login</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            self._processControllers({name: self.options.routes.login});
          }
          <span class="hljs-keyword">else</span> {
            self.options.log(<span class="hljs-string">'[Backbone.Highway] Skipping route "'</span> + currentName +
              <span class="hljs-string">'", '</span> + (self.options.authenticated ? <span class="hljs-string">'already '</span> : <span class="hljs-string">'not '</span>) + <span class="hljs-string">'logged in'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Execute 403 controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">this</span>._httpError(<span class="hljs-number">403</span>);
          }
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Check if the route is an alias.
Aliasing through the action parameter will probably conflict with before/after triggers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (_.isString(def.action)) {
          self.options.log(<span class="hljs-string">'[Backbone.Highway] Caught alias route: "'</span> + currentName + <span class="hljs-string">'" &gt;&gt; "'</span> + def.action + <span class="hljs-string">'"'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Execute alias route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          self._processControllers({name: def.action, args: args}, <span class="hljs-literal">true</span>);

          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">else</span> {
          self.options.log(<span class="hljs-string">'[Backbone.Highway] Executing route named "'</span> + currentName + <span class="hljs-string">'"'</span>);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Process pre-triggers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!_.isEmpty(def.before)) {
          self._processTriggers(def.before, args);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>Execute route main action</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (_.isFunction(def.action)) {
          def.action.apply(self, args);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Process post-triggers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!_.isEmpty(def.after)) {
          self._processTriggers(def.after, args);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      };</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Push the new controller name to the route name’s list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      extendedRoutes[def.path].push(currentName);</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Push the new controller to the given route controllers list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      extendedController[name].wrappers.push(controllerWrapper);</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Re-push the controller with the current route name in case it overloads an existing path
This is to permit the go method to work on controllers defined with a same path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (name !== currentName) {</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>Create a placeholder for the route controllers
Adding the new controller to the given route controllers list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        extendedController[currentName] = {
          re: <span class="hljs-literal">null</span>,
          wrappers: [controllerWrapper]
        };
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p><strong>Route the application to a specific named route</strong></p>
<ul>
<li>@param  {Mixed} <strong>name</strong> - Route name</li>
<li>@param  {Mixed} <strong>args</strong> - Array of arguments or object with named parameters
matching those declared in the route path</li>
<li>@return {Boolean} Will return false if the routing was cancelled or failed, else true</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    go: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name, args, options</span>) </span>{
      <span class="hljs-keyword">var</span> route = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">var</span> path = <span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Check if an object is given instead of a string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (_.isObject(name)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Rename object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        route = name;</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Transfer route name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        name = route.name;</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Transfer route path and remove first slash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (_.isString(route.path)) {
          path = <span class="hljs-keyword">this</span>._removeRootUrl(route.path);
          path = <span class="hljs-keyword">this</span>._stripHeadingSlash(path);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Transfer args</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        args = route.args || args;</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Transfer options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        options = route.options || options;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Extend default router navigate options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      options = _.extend({trigger: <span class="hljs-literal">true</span>, replace: <span class="hljs-literal">false</span>}, options);</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Check if necessary arguments are passed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!name &amp;&amp; path === <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway.go] Missing parameters, name or path is necessary'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Check if route exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (
        (name &amp;&amp; !<span class="hljs-keyword">this</span>._exists({name: name})) ||
        (path &amp;&amp; !<span class="hljs-keyword">this</span>._exists({path: path}))
      ) {
        <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway] Inexisting route name: '</span> + name);</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Execute 404 controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._httpError(<span class="hljs-number">404</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Try to retrieve name if it is still missing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!name) {
        name = <span class="hljs-keyword">this</span>._name(path);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>Determine if the requested route is the same as the last one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> sameRoute = _.isEmpty(_.without(<span class="hljs-keyword">this</span>.currentRoutes, name));</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>If it is the same route and the force option was not passed return false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (sameRoute &amp;&amp; !options.force) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Convert object args to array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!_.isUndefined(args) &amp;&amp; !_.isArray(args)) {
        args = <span class="hljs-keyword">this</span>._convertArgObjectToArray(<span class="hljs-keyword">this</span>._path(name), args);
      }

      <span class="hljs-keyword">var</span> continueProcess = <span class="hljs-literal">true</span>;

      _.forEach(<span class="hljs-keyword">this</span>.currentRoutes, _.bind(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">route</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Check if the previous route has a close controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (_.isFunction(closeControllers[route]) &amp;&amp; name !== route) {</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Execute close controller passing current route data and retrieve result</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          continueProcess = closeControllers[route].call(<span class="hljs-keyword">this</span>, name, args, options);
        }
      }, <span class="hljs-keyword">this</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>If controller returned false, cancel go process</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!continueProcess) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>Path is still not known</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (path === <span class="hljs-literal">null</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>Retrieve route path passing arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        path = <span class="hljs-keyword">this</span>._path(name);
        path = path &amp;&amp; <span class="hljs-keyword">this</span>._parse(path, args);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>If an error occured retrieving the path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (path === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Re-initialize currentRoutes storage</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.currentRoutes = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Navigate the Backbone.Router</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      router.navigate(path, options);</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Restart Backbone.history to re-execute the same route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (sameRoute) {
        <span class="hljs-keyword">this</span>.restart();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p><strong>Clear all cached triggers</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    clearCache: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      cachedTriggers = [];
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p><strong>Process a list of triggers that can be declared as a simple string or an object</strong></p>
<ul>
<li>@param {Array} <strong>triggers</strong> The list of triggers to process*</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _processTriggers: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">triggers, routeArgs</span>) </span>{
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (!_.isArray(triggers)) {
        triggers = [triggers];
      }

      _.forEach(triggers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">trigger</span>) </span>{
        self._processTrigger(trigger, routeArgs);
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p><strong>Process a single trigger</strong></p>
<ul>
<li>@param {Mixed} <strong>trigger</strong> String or Object describing the trigger*</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _processTrigger: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">trigger, routeArgs</span>) </span>{
      <span class="hljs-keyword">if</span> (_.isObject(trigger)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Retrieve the name of the trigger if it’s declared using a path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (trigger.path) {
          trigger.name = <span class="hljs-keyword">this</span>._name(trigger.path);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Check if the trigger is marked for caching</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (trigger.cache &amp;&amp; <span class="hljs-keyword">this</span>._cacheTrigger(trigger)) {
          <span class="hljs-keyword">return</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>Wrap the given parameter in an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!_.isUndefined(trigger.args) &amp;&amp; !_.isNull(trigger.args) &amp;&amp; !_.isArray(trigger.args)) {
          trigger.args = [trigger.args];
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>If no arguments were passed to the trigger pass along route arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (_.isEmpty(trigger.args)) {
          trigger.args = routeArgs;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>If the trigger is actually a controller execute it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (trigger.name &amp;&amp; <span class="hljs-keyword">this</span>._exists({name: trigger.name})) {
          <span class="hljs-keyword">this</span>._processControllers(trigger, <span class="hljs-literal">true</span>);
          <span class="hljs-keyword">return</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>Create a dispatcher format object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> args = [trigger.name];</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>Finish formatting trigger arguments for the dispatcher</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _.forEach(trigger.args, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg</span>) </span>{
          args.push(arg);
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>Dispatch the event applying arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._hasDispatcher()) {
          <span class="hljs-keyword">this</span>.dispatcher.trigger.apply(<span class="hljs-keyword">this</span>.dispatcher, args);
        }
      }
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_.isString(trigger)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>Check if the trigger is actually a declared route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._exists({name: trigger})) {
          <span class="hljs-keyword">this</span>._processControllers({
            name: trigger,
            args: routeArgs
          }, <span class="hljs-literal">true</span>);
        }
        <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>Else give to the dispatcher</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._hasDispatcher()) {
            <span class="hljs-keyword">this</span>.dispatcher.trigger.call(<span class="hljs-keyword">this</span>.dispatcher, trigger);
          }
        }
      }
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway._processTrigger] Bad trigger format, '</span> +
          <span class="hljs-string">'needs to be a string or an object, given: '</span> + <span class="hljs-keyword">typeof</span> trigger);
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p><strong>Process a list of controllers</strong></p>
<ul>
<li>@param {Object} <strong>def</strong> The controller definition containing either the route name or its path and
eventually arguments to be passed to the controller*</li>
<li>@param {Boolean} <strong>isTrigger</strong> Is the controller being executed as a trigger i.e. as an alias</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _processControllers: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">def, isTrigger</span>) </span>{
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">var</span> name = def.name;
      <span class="hljs-keyword">var</span> args = def.args;</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>Do not interpret control as a trigger by default</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      isTrigger = isTrigger || <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>Check if the given controller actually exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (extendedController[name]) {</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>Extract parameters from path if possible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (def.path) {
          args = <span class="hljs-keyword">this</span>._extractParameters(name, def.path);</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>Backbone gives [null] for routes without arguments
so if there is not more than one argument use the passed arguments instead</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> (args.length === <span class="hljs-number">1</span> &amp;&amp; args[<span class="hljs-number">0</span>] === <span class="hljs-literal">null</span>) {
            args = def.args;
          }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>Ensure args is properly declared and remove unwanted values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        args = <span class="hljs-keyword">this</span>._sanitizeArgs(args);</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>Loop through each defined route controller</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _.forEach(extendedController[name].wrappers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>Execute controller wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          callback.call(self, args, isTrigger);
        });

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway._processControllers] Inexisting controller: '</span> + name);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p><strong>Find a cached trigger</strong></p>
<ul>
<li><em>@param  {Object} <strong>trigger</strong> Trigger object definition</em></li>
<li><em>@return {Object} Cached trigger object</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _findCachedTrigger: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">trigger</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>Try to check if it already exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> cache = _.find(cachedTriggers, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{
        <span class="hljs-keyword">return</span> item.name === trigger.name;
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>If it doesn’t, create it and retrieve it again</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!cache) {
        cachedTriggers.push(_.extend({}, trigger));
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._findCachedTrigger(trigger);
      }

      <span class="hljs-keyword">return</span> cache;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <p><strong>Set a triggers cache state</strong></p>
<ul>
<li><em>@param  {Object} <strong>trigger</strong> Trigger object definition</em></li>
<li><em>@return {Boolean} True if already executed, else false</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _cacheTrigger: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">trigger</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p>Find cached trigger object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> cache = <span class="hljs-keyword">this</span>._findCachedTrigger(trigger);</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>Has it already been executed ?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (cache.done) {
        <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway] Trigger [ '</span> +
          (trigger.name || trigger.path) + <span class="hljs-string">' ] has been skipped (cached)'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>Mark it done</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      cache.done = <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p><strong>Start Backbone.History if it hasn’t been done yet.</strong>
Will trigger a client-side 404 if the loading route doesn’t exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _startHistory: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>Check if Backbone.History is already enabled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!Backbone.History.started) {
        <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway.start] Starting Backbone.history ('</span> +
          (<span class="hljs-keyword">this</span>.options.root ? <span class="hljs-string">'root: '</span> + <span class="hljs-keyword">this</span>.options.root : <span class="hljs-string">'empty root url'</span>) + <span class="hljs-string">')'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>Initialize Backbone.history</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> existingRoute = Backbone.history.start({
          pushState: <span class="hljs-keyword">this</span>.options.pushState,
          root: <span class="hljs-keyword">this</span>.options.root,
          hashChange: <span class="hljs-keyword">this</span>.options.hashChange,
          silent: <span class="hljs-keyword">this</span>.options.silent
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>Trigger a 404 if the current route doesn’t exist.
Ensure the ‘silent’ options isn’t activated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!existingRoute &amp;&amp; !<span class="hljs-keyword">this</span>.options.silent) {
          <span class="hljs-keyword">this</span>._httpError(<span class="hljs-number">404</span>);
        }
        <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>._applyStoredRoute();
        }
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p><strong>Determine if a dispatcher (event aggregator) was passed with the options when the router was started.</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _hasDispatcher: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dispatcher &amp;&amp; _.isFunction(<span class="hljs-keyword">this</span>.dispatcher.trigger);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p><strong>Trigger an error controller</strong></p>
<ul>
<li><em>@param  {Int} <strong>code</strong> Error code to trigger (404|403)</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _httpError: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">code</span>) </span>{
      <span class="hljs-keyword">var</span> url = Backbone.history.getFragment();
      <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway] Inexisting route: '</span> + url);

      <span class="hljs-keyword">if</span> (code !== <span class="hljs-number">404</span> &amp;&amp; code !== <span class="hljs-number">403</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'[Backbone.Highway] Unhandled http error code: '</span> + code);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._processControllers({
        name: <span class="hljs-keyword">this</span>.options.routes[<span class="hljs-string">'error'</span> + code],
        args: [url]
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p><strong>Reload the route that was stored before redirecting to login controller</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _applyStoredRoute: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>Check if a route was stored while requiring a user login</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> storedRoute = <span class="hljs-keyword">this</span>._getStoredRoute();</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>If a route is stored, use it!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (storedRoute) {
        <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway] Loaded stored route: '</span> + storedRoute);</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>Clear stored route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._clearStore();</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p>Redirect to stored route</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>.go({
          path: storedRoute
        });
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <p><strong>Retrieve the path of a route by it’s name.</strong></p>
<ul>
<li><em>@param  {String} <strong>routeName</strong>  The route name</em></li>
<li><em>@return {String} The raw route path or false if the route doesn’t exist</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _path: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
      <span class="hljs-keyword">var</span> path;

      <span class="hljs-keyword">for</span> (path <span class="hljs-keyword">in</span> routes) {
        <span class="hljs-keyword">if</span> (routes[path] === name) {
          <span class="hljs-keyword">return</span> path;
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <p><strong>Retrieve the name of a route by it’s path</strong></p>
<ul>
<li><em>@param {String} <strong>path</strong>  The route path</em></li>
<li><em>@return {Mixed} The name of the route, false if it doesn’t exist</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _name: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) </span>{
      <span class="hljs-keyword">var</span> name;</pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <p>Remove first slash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      path = <span class="hljs-keyword">this</span>._stripHeadingSlash(path);</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <p>Loop through all the controllers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">for</span> (name <span class="hljs-keyword">in</span> extendedController) {</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <p>Check if given path validates against controller regular expression</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (extendedController[name].re &amp;&amp; extendedController[name].re.test(path)) {
          <span class="hljs-keyword">return</span> name;
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <p><strong>Check if a route exists by its name or its path</strong></p>
<ul>
<li><em>@param  {Object}  <strong>params</strong> Object with a name or path key</em></li>
<li><em>@return {Boolean} True if route exists else false.
Will also return false when wrong type of parameter is passed</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _exists: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">params</span>) </span>{
      <span class="hljs-keyword">return</span> _.isObject(params) &amp;&amp; (
        !_.isUndefined(extendedController[params.name]) || <span class="hljs-keyword">this</span>._name(params.path) !== <span class="hljs-literal">false</span>
      );
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <p><strong>Parse a path to inject a list of arguments into the path.</strong></p>
<ul>
<li><em>@param  {String} <strong>path</strong> The path to parse containing argument declarations starting with colons</em></li>
<li><em>@param  {Array}  <strong>args</strong> List of arguments to inject into the path</em></li>
<li><em>@return {String}      The path with the arguments injected</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _parse: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path, args</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <p>Convert object argument to ordered array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!_.isUndefined(args) &amp;&amp; !_.isArray(args)) {
        args = <span class="hljs-keyword">this</span>._convertArgObjectToArray(path, args);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <p>Check if any arguments were passed to the parser</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isValidArgsArray(args)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <p>Remove optional parameters from the path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        path = path.replace(re.optionalParams, <span class="hljs-string">''</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <p>Validate path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._checkPath(path);

        <span class="hljs-keyword">return</span> path;
      }

      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              <p>Replace named/splat parameters with actual arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _.forEach(<span class="hljs-keyword">this</span>._sanitizeArgs(args), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg</span>) </span>{
        path = self._replaceArg(path, arg);
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <p>Remove remaining optional components from the path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _.forEach(path.match(re.optionalParams), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">part</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <p>Only remove components for which arguments where missing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (re.namedParam.test(part) || re.splatParams.test(part)) {
          path = path.replace(part, <span class="hljs-string">''</span>);
        }
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <p>Remove remaining parentheses and trailing slashes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      path = path.replace(re.parentheses, <span class="hljs-string">''</span>).replace(re.trailingSlash, <span class="hljs-string">''</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              <p>Validate path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._checkPath(path);

      <span class="hljs-keyword">return</span> path;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <p><strong>Convert object with named parameters to ordered array</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _convertArgObjectToArray: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path, args</span>) </span>{
      <span class="hljs-keyword">var</span> paramNames = path.match(re.namedParams);
      <span class="hljs-keyword">return</span> _.map(paramNames, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">return</span> args[name.substr(<span class="hljs-number">1</span>)];
      });
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <p><strong>Replace a named argument or a splat parameter in a path</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _replaceArg: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path, arg</span>) </span>{
      <span class="hljs-keyword">return</span> path.indexOf(<span class="hljs-string">':'</span>) !== -<span class="hljs-number">1</span> ? path.replace(re.namedParam, arg) : path.replace(re.splatParams, arg);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <p><strong>Validate parsed path</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _checkPath: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <p>Throw an error if mandatory parameters are missing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (re.namedParam.test(path) || re.splatParams.test(path)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ReferenceError</span>(<span class="hljs-string">'[Backbone.Highway._parse] Missing necessary arguments for path'</span>);
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <p><strong>Clean arguments array</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _sanitizeArgs: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <p>Ensure args is an array or an arguments object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!_.isObject(args) &amp;&amp; !_.isArray(args)) {
        args = [args];
      }
      <span class="hljs-keyword">return</span> _.without(args, <span class="hljs-literal">null</span>, <span class="hljs-literal">undefined</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <p><strong>Check if parameter is a valid arguments array sanitizing it before hand</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _isValidArgsArray: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) </span>{
      <span class="hljs-keyword">return</span> !_.isEmpty(<span class="hljs-keyword">this</span>._sanitizeArgs(args));
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <p><strong>Store the current pathname in the local storage</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _storeCurrentRoute: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <p>Retrieve current path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> path = Backbone.history.getFragment();

      <span class="hljs-keyword">this</span>.options.log(<span class="hljs-string">'[Backbone.Highway] Storing current path: '</span> + path);</pre></div></div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <p>Store the path for next init after page reload</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (localStorage) {
        localStorage.setItem(<span class="hljs-keyword">this</span>._getStoreKey(<span class="hljs-string">'path'</span>), path);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              <p><strong>Generate a complete store key using the prefix in the options</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getStoreKey: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <p>Concatenate prefix, separator and key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.store.prefix + <span class="hljs-keyword">this</span>.options.store.separator + key;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-220">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-220">&#182;</a>
              </div>
              <p><strong>Retrieve the stored route if any</strong></p>
<ul>
<li><em>@return {String} The currenlty stored route as a string,
null if not existing, false if localStorage doesn’t exist</em></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _getStoredRoute: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> localStorage &amp;&amp; localStorage.getItem(<span class="hljs-keyword">this</span>._getStoreKey(<span class="hljs-string">'path'</span>));
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-221">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-221">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-222">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-222">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-223">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-223">&#182;</a>
              </div>
              <p><strong>Clear the stored route</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _clearStore: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (localStorage) {
        localStorage.removeItem(<span class="hljs-keyword">this</span>._getStoreKey(<span class="hljs-string">'path'</span>));
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-224">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-224">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-225">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-225">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-226">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-226">&#182;</a>
              </div>
              <p><strong>Remove heading slash or pound sign from a path, if any</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _stripHeadingSlash: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) </span>{
      <span class="hljs-keyword">return</span> _.isString(path) &amp;&amp; path.replace(re.headingSlash, <span class="hljs-string">''</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-227">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-227">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-228">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-228">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-229">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-229">&#182;</a>
              </div>
              <p><strong>Remove pushState root url from path</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _removeRootUrl: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) </span>{
      <span class="hljs-keyword">return</span> _.isString(path) &amp;&amp; path.replace(<span class="hljs-keyword">this</span>.options.root, <span class="hljs-string">''</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-230">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-230">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-231">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-231">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-232">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-232">&#182;</a>
              </div>
              <p><strong>Extract parameters from the path of a route</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _extractParameters: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name, path</span>) </span>{
      <span class="hljs-keyword">return</span> Backbone.Router.prototype._extractParameters(
        extendedController[name].re,
        <span class="hljs-keyword">this</span>._stripHeadingSlash(path)
      );
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-233">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-233">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-234">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-234">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-235">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-235">&#182;</a>
              </div>
              <p><strong>Transform a route path to a regular expression</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _routeToRegExp: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) </span>{
      <span class="hljs-keyword">return</span> Backbone.Router.prototype._routeToRegExp(path);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-236">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-236">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-237">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-237">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-238">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-238">&#182;</a>
              </div>
              <p><strong>Original Backbone.Router Methods</strong></p>

            </div>
            
        </li>
        
        
        <li id="section-239">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-239">&#182;</a>
              </div>
              <p>Listen to original Backbone.Router events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    on: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> router &amp;&amp; router.on.apply(router, <span class="hljs-built_in">arguments</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-240">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-240">&#182;</a>
              </div>
              <p>Stop listening to original Backbone.Router events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    off: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> router &amp;&amp; router.off.apply(router, <span class="hljs-built_in">arguments</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-241">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-241">&#182;</a>
              </div>
              <p>Trigger event on original Backbone.Router</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    trigger: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> router &amp;&amp; router.trigger.apply(router, <span class="hljs-built_in">arguments</span>);
    }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-242">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-242">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-243">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-243">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-244">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-244">&#182;</a>
              </div>
              <p>Initialize Backbone.Highway controller instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Backbone.Highway = <span class="hljs-keyword">new</span> Highway();</pre></div></div>
            
        </li>
        
        
        <li id="section-245">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-245">&#182;</a>
              </div>
              <p>Return instance for AMD/Require environments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">return</span> Backbone.Highway;
}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
